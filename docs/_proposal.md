# オリジナルプロジェクト考案書: logi-balance（配達限定・機能限定版）

## 0. 概要

運送現場では **配達コースごとの件数・個数・距離の偏り** が生じやすく、その結果として  
**ドライバー間の負担差や手当の不公平感** が発生し、定着率の低下につながっている。  
特に、発言力のあるベテランドライバーの声が優先され、新人が高負担・低収入になりやすい構造が課題となっている。

**logi-balance（ロジバランス）** は、コース間の配達負荷を定量化・可視化することで、  
**公平な配分判断と運用改善を支援する業務改善ツール**である。  
新人が安心して働き続けられる環境を整備するとともに、  
**人件費・傭車コストを含めた全体最適化** を目的とする。

### 前提
1. 給与・手当は **配達個数・集荷個数・能力給・年功序列・就労時間・販売奨励金** 等、複数要素の影響を受ける。
2. 一般的に **集荷手当の単価は配達手当より高い**。
3. 上記要因により、ベテランは集荷を優先し、新人は配達偏重になりやすい。
   本ツールは、この不均衡を **「見える化」** により抑制する。

---

## 1. 背景・課題

- **負担の偏り**  
  コースごとの負担差が手当の不公平感を生み、新人の早期離職につながっている。

- **適正物量・適正人員の判断が感覚に依存している**  
  現状では、ドライバーから  
  「このコースは物量が多くて大変だ」  
  という申告があった場合、その感覚的な訴えを根拠に **傭車を追加手配** するケースが多い。  
  しかし、実際の配達件数・距離・拘束時間を定量的に把握できていないため、  
  **本当に傭車が必要なのか、既存コースの再配分で対応可能なのか** を判断しづらい。

- **コスト是正の難しさ**  
  上記の構造により、傭車の過剰投入が発生しやすく、  
  結果として **不要な外注コストが恒常的に発生している可能性** がある。

- **現行システムの限界**  
  既存アプリは実績登録・追跡が中心であり、  
  **負担分析・コース適正化・傭車判断を支援する仕組みが不足している**。

---

## 2. ターゲット / ステークホルダー

- **経営層・協力会社**  
  人件費・傭車費用を含めた全体最適、運行コストの是正、離職抑制。

- **配車担当**  
  傭車追加やコース分割の判断材料をデータで把握し、  
  是正までのリードタイム短縮を図る。

- **ドライバー**  
  感覚ではなく実績に基づいた、公正な評価と負担配分。

---

## 3. 提供価値

- 実績（件数・個数・距離・拘束時間 等）を **スコア化** し、  
  コース間の負担差を可視化する。
- 可視化結果に基づき、  
  **傭車投入・コース分割・再配分の妥当性を判断可能** とする  
  （初版では提案機能は持たず、人による判断を前提とする）。
- 蓄積データの平均値・分布を基に、  
  **適正物量・適正稼働の目安を把握可能** とする。

---

## 4. 主要機能（MVP）

### 4.1 実績 CRUD
- **Create**：日付／ドライバー名／コース／配達先／個数／距離／時間（積込時間は除外）を登録する。
- **Read / Update / Delete**：実績・ドライバー・コース情報の参照、更新、削除を行う。

### 4.2 配達先登録
- 既存の配達先を選択し **個数** を入力することで、  
  **配達リスト（1件単位）** を生成する。

### 4.3 配達時間登録
- 配達リストの **「完了」** 操作により、  
  ステータスを配達完了に更新し、**現時刻を記録** する。

### 4.4 負担スコア算出
- 実績データを基に **Work / Density / Total** を算出する。

### 4.5 ダッシュボード
- コース別・日付別・全体の簡易グラフを表示する。
  - グラフ：**Work / Density / Total**（カード表示＋ミニチャート）

### 4.6 CSV 出力（将来 PDF 対応）
- 期間・コースで絞り込み、  
  CSV / PDF を出力可能とする（初版は CSV のみ対応）。

---

## 7. リスクと前提

- **スコア式の妥当性**  
  現場ヒアリングに基づき重みを設定し、月次レビューにより継続的に改善する。

- **入力運用の徹底**  
  日次入力率 95%以上の達成を目標とし、  
  UI の簡素化に加えて、事務スタッフによる一括登録を可能とする  
  CSV インポート機能を実装する。  
  これにより、現場の入力負荷を軽減し、  
  継続的なデータ蓄積を前提とした運用を実現する。

- **性能**  
  ページングおよび基本的なインデックスを優先的に導入する。

---

## 8. 将来拡張（プラスアルファ）

- **地図表示によるコース可視化**
  - 停止点データ（CSV / GPX）を取り込み、
    配達実績を地図上で把握できるようにすることを想定する。
  - 停止点を色分けしたり、ピンの大きさを変えたりすることで、
    配達量やコースごとの特性を直感的に理解できる表示を目的とする。

- **ドライバー（従業員）単位での配達実績検索・集計機能**
  - 従業員別の配達件数・稼働日数・期間指定による実績確認を想定する。
  - 現在のデータモデル（deliveries.employee_id）を活用し、  
    UI 追加のみで拡張可能な設計とする。

---

## エレベーターピッチ（経営層向け）

配達負担の偏りと評価の不公平による離職・機会損失という課題に対し、
**logi-balance** は配達実績を定量化・可視化することで、
**公正な配分判断と事実に基づく是正判断** を支援する業務改善ツールです。

コースごとの配達件数・個数・距離・拘束時間といった実績を
同一指標で可視化することで、各コースの負担状況を客観的に把握できます。
これにより、感覚や声の大きさに依存した判断ではなく、
**実績データに基づいた配分見直しや運用是正** を可能にします。

単なる実績記録にとどまらず、
現場運用を崩すことなく **小さく導入して効果検証ができる点** が特長です。

---
<details>
  <summary><h2>Appendix A. 負担スコアの根拠と計算詳細 </h2></summary>

**初期パラメータ（暫定）**：`S=5, P=0.7, T=1.5, α=0.3`
- `Work = S×件数 + P×個数`
- `Density = 1 + α × max(0, km/停車 − T)`
- `Total = Work × Density`

### A.1 係数の意味と根拠
**S（停車1件の基礎）= 5**
- 1件あたりの固定作業（駐停車、対面、署名、端末操作 等）
- 単位：pt（≒分相当）。4〜6分の中央値より **5pt** を採用

**P（1個の追加）= 0.7**
- 同一停車内で1個増えるごとの増分作業（持ち替え、スキャン 等）
- 30〜60秒の中間より **0.7pt**。直感：`S/P ≈ 7.1` → **1件 ≒ 7個**

**T（しきい値；km/停車）= 1.5**
- 疎密補正を開始する基準密度（ここまでは補正なし）
- 事前分布の P50〜P60（中央値近傍）を採用

**α（感度；/（km/停車））= 0.3**
- `T` 超過 1（km/停車）あたりの増分倍率
- 例：疎い代表点 `r=P90=2.0` で +15% を狙う → `α = 0.15 / (2.0 − 1.5) = 0.3`

### A.2 計算手順
**1) Work（作業量ポイント）**
```
Work = S × 配達完了件数 + P × 配達個数
```
- 例：`S=5, P=0.7`
  - ケース1：`5×60 + 0.7×100 = 370 pt`
  - ケース2：`5×40 + 0.7×60  = 242 pt`
  - ケース3：`5×20 + 0.7×30  = 121 pt`

**2) Density（走行難易度・密度係数）**
```
Density = 1 + α × max(0, km/停車 − T)
```
- 例：`T=1.5, α=0.3`
  - 都市部：`km/停車=0.667 → 1.0`
  - 準郊外：`2.0 → 1 + 0.3×0.5 = 1.15`
  - 山間部：`7.5 → 1 + 0.3×6.0 = 2.8`

**3) Total（総合負担）**
```
Total = Work × Density
```
- 例：
  - ケース1：`370 × 1.0  = 370.0`
  - ケース2：`242 × 1.15 = 278.3`
  - ケース3：`121 × 2.8  = 338.8`
  → 負担の大きい順：**1 > 3 > 2**

### A.3 運用ポリシー（妥当性担保）
- **初期値は仮置き**：現場データ（月次）で再推定
- **変更管理**：重み変更は月次レビューで合意、変更履歴をバージョン管理

</details>

<details>
  <summary><h2>指標（KGI/KPI） </h2></summary>
- **KGI（最終成果）**
  - 2026/03 までに **コース負担スコア差分 ≤ 10**（2025/12–02 平均比）
- **KPI（先行指標｜UX中心）**
  - 実績の **日次入力率 ≥ 95%**
  - **ダッシュボード応答の P95 を記録・可視化**（初版はログ集計）
  - **2秒以内率 ≥ 90%**
- **用語定義**
  - **負担スコア**：距離・件数・個数・拘束時間の加重合算（詳細はAppendix A を参照）
  - **P95**：全リクエストの95%がこの時間以下で処理される値
  - **2秒以内率**：`/dashboard` 応答が2秒以下の割合

</details>
